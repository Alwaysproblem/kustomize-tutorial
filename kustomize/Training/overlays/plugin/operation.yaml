# replace the starting training command
- op: add
  path: /spec/tfReplicaSpecs/Worker/template/spec/containers/0/args
  value: 
  - "mpirun --allow-run-as-root python model.py"

# # add resource limitation to laucher
# - op: add
#   path: /spec/tfReplicaSpecs/Launcher/template/spec/containers/0/resources/limits
#   value: 
#     cpu: 2
#     memory: 20Gi

# this is the number of wokers
- op: replace
  path: /spec/tfReplicaSpecs/Worker/replicas
  value: 3

# replace worker resouce declare
- op: replace
  path: /spec/tfReplicaSpecs/Worker/template/spec/containers/0/resources/request
  value:
    cpu: 4
    memory: 10Gi

# # add resource limitation in worker container
# - op: add
#   path: /spec/tfReplicaSpecs/Worker/template/spec/containers/0/resources/limits
#   value:
#     cpu: 12
#     memory: 60Gi

# # add container vlume mount in front of the 2nd place
# - op: add
#   path: /spec/tfReplicaSpecs/Worker/template/spec/containers/0/volumeMounts/2
#   value:
#     mountPath: /train
#     name: trainMount

# # replace n-th container vlume mount 
# - op: replace
#   path: /spec/tfReplicaSpecs/Worker/template/spec/containers/0/volumeMounts/0
#   value:
#     mountPath: /datasets
#     name: datasets-for-mount

# # insert a new container vlume mount in front of the first place 
# - op: add
#   path: /spec/tfReplicaSpecs/Worker/template/spec/volumes/3
#   value:
#     name: volumns-datasets
#     hostPath:
#       path: /home/sdev/oh-my-gash
#       readOnly: true


- op: replace
  path: /spec/tfReplicaSpecs/Worker/template/spec/volumes/0
  value:
    name: dataset
    hostPath:
      path: /home/sdev/s3mount/yongxi/training/CVR/
      readOnly: true


- op: replace
  path: /spec/tfReplicaSpecs/Worker/template/spec/volumes/1
  value:
    name: models
    hostPath:
      path: /home/sdev/s3mount/yongxi/training/models/cvr


- op: replace
  path: /spec/tfReplicaSpecs/Worker/template/spec/volumes/2
  value:
    name: tblogs
    hostPath:
      path: /home/sdev/s3mount/yongxi/TBlogs/cvr/DeepFM

